<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>태니지먼트 강점 약식 진단</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React, ReactDOM, Babel CDN - 안정적인 버전 고정 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; 
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
        }
        .radar-transition { transition: all 1s ease-out; }
        /* 로딩 중 화면 표시 방지 */
        [v-cloak] { display: none; }
        #root:empty {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #6366f1;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root">잠시만 기다려주세요...</div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const Icons = {
            ChevronLeft: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>
            ),
            RefreshCw: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
            ),
            BookOpen: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a4 4 0 0 0-4-4H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a4 4 0 0 1 4-4h6z"/></svg>
            ),
            Award: () => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/><circle cx="12" cy="8" r="6"/></svg>
            )
        };

        const App = () => {
            const roles = [
                { id: 'A', name: '동기부여', color: '#EF4444' },
                { id: 'B', name: '외교', color: '#F97316' },
                { id: 'C', name: '추진', color: '#F59E0B' },
                { id: 'D', name: '완성', color: '#10B981' },
                { id: 'E', name: '조정', color: '#3B82F6' },
                { id: 'F', name: '평가', color: '#6366F1' },
                { id: 'G', name: '탐구', color: '#8B5CF6' },
                { id: 'H', name: '창조', color: '#EC4899' },
            ];

            const questionRows = [
                { id: 1, words: [{type: 'A', word: '친절한'}, {type: 'C', word: '주도적인'}, {type: 'E', word: '계획적인'}, {type: 'G', word: '효율적인'}] },
                { id: 2, words: [{type: 'A', word: '감성적인'}, {type: 'D', word: '목표를 달성하는'}, {type: 'F', word: '분석적인'}, {type: 'H', word: '상상력이 풍부한'}] },
                { id: 3, words: [{type: 'B', word: '사교적인'}, {type: 'D', word: '집요한'}, {type: 'F', word: '객관적인'}, {type: 'H', word: '창의적인'}] },
                { id: 4, words: [{type: 'B', word: '표현을 잘하는'}, {type: 'C', word: '추진력이 있는'}, {type: 'E', word: '관리하는'}, {type: 'G', word: '직관적인'}] },
                { id: 5, words: [{type: 'A', word: '격려하는'}, {type: 'C', word: '행동력이 있는'}, {type: 'F', word: '논리적인'}, {type: 'G', word: '사색적인'}] },
                { id: 6, words: [{type: 'B', word: '중재하는'}, {type: 'D', word: '신중한'}, {type: 'E', word: '정리를 잘하는'}, {type: 'G', word: '지적인'}] },
                { id: 7, words: [{type: 'B', word: '모임을 즐기는'}, {type: 'D', word: '끝까지 마무리하는'}, {type: 'E', word: '체계적인'}, {type: 'H', word: '융통성 있는'}] },
                { id: 8, words: [{type: 'A', word: '세심한'}, {type: 'C', word: '앞장서는'}, {type: 'F', word: '비교하는'}, {type: 'G', word: '탐구심이 많은'}] },
                { id: 9, words: [{type: 'A', word: '친절한'}, {type: 'B', word: '사교적인'}, {type: 'C', word: '주도적인'}, {type: 'D', word: '집요한'}] },
                { id: 10, words: [{type: 'E', word: '계획적인'}, {type: 'F', word: '객관적인'}, {type: 'G', word: '효율적인'}, {type: 'H', word: '창의적인'}] },
                { id: 11, words: [{type: 'A', word: '감성적인'}, {type: 'B', word: '표현을 잘하는'}, {type: 'C', word: '추진력 있는'}, {type: 'D', word: '목표를 달성하는'}] },
                { id: 12, words: [{type: 'E', word: '관리하는'}, {type: 'F', word: '분석적인'}, {type: 'G', word: '깊이 생각하는'}, {type: 'H', word: '상상력이 풍부한'}] },
                { id: 13, words: [{type: 'A', word: '격려하는'}, {type: 'B', word: '중재하는'}, {type: 'E', word: '정리를 잘하는'}, {type: 'F', word: '논리적인'}] },
                { id: 14, words: [{type: 'C', word: '행동력 있는'}, {type: 'D', word: '신중한'}, {type: 'G', word: '지적인'}, {type: 'H', word: '직관적인'}] },
                { id: 15, words: [{type: 'A', word: '세심한'}, {type: 'D', word: '끝까지 마무리하는'}, {type: 'E', word: '체계적인'}, {type: 'G', word: '탐구심이 많은'}] },
                { id: 16, words: [{type: 'B', word: '모임을 즐기는'}, {type: 'C', word: '앞장서는'}, {type: 'F', word: '비교하는'}, {type: 'H', word: '융통성 있는'}] },
                { id: 17, words: [{type: 'A', word: '세심한'}, {type: 'D', word: '신중한'}, {type: 'E', word: '관리하는'}, {type: 'H', word: '창의적인'}] },
                { id: 18, words: [{type: 'B', word: '사교적인'}, {type: 'C', word: '추진력 있는'}, {type: 'F', word: '논리적인'}, {type: 'G', word: '탐구심이 많은'}] },
                { id: 19, words: [{type: 'A', word: '감성적인'}, {type: 'E', word: '정리를 잘하는'}, {type: 'D', word: '끝까지 마무리하는'}, {type: 'H', word: '창의적인'}] },
                { id: 20, words: [{type: 'B', word: '표현을 잘하는'}, {type: 'F', word: '논리적인'}, {type: 'C', word: '앞장서는'}, {type: 'G', word: '효율적인'}] },
            ];

            const [currentStep, setCurrentStep] = useState(0);
            const [selections, setSelections] = useState([]); 
            const [isFinished, setIsFinished] = useState(false);

            const progress = ((currentStep) / questionRows.length) * 100;

            const handleSelect = (type) => {
                const newSelections = [...selections];
                newSelections[currentStep] = type;
                setSelections(newSelections);

                if (currentStep < questionRows.length - 1) {
                    setCurrentStep(currentStep + 1);
                } else {
                    setIsFinished(true);
                }
            };

            const scores = useMemo(() => {
                const counts = { A: 0, B: 0, C: 0, D: 0, E: 0, F: 0, G: 0, H: 0 };
                selections.forEach(type => {
                    if (type) counts[type]++;
                });
                return counts;
            }, [selections]);

            // 방사형 그래프 설정
            const chartSize = 600; 
            const center = 300;
            const radius = 220; 
            
            // 결과 면적 배율 조정 (보라색 영역을 시각적으로 2배 강조하기 위해 visualMaxScore를 6으로 설정)
            const visualMaxScore = 6; 

            // 9시 방향(Math.PI)에서 시작하여 시계 방향으로 배치
            const getAngle = (index) => (Math.PI * 2 * index) / 8 + Math.PI;

            const getRadarPoints = () => {
                return roles.map((role, i) => {
                    const angle = getAngle(i);
                    const score = scores[role.id] || 0;
                    // 점수에 비례해 반지름 계산 (visualMaxScore 기준)
                    const r = Math.min(radius, Math.max(15, (score / visualMaxScore) * radius)); 
                    const x = center + r * Math.cos(angle);
                    const y = center + r * Math.sin(angle);
                    return `${x},${y}`;
                }).join(' ');
            };

            const resetTest = () => {
                setCurrentStep(0);
                setSelections([]);
                setIsFinished(false);
            };

            return (
                <div className="min-h-screen flex flex-col items-center justify-center p-4">
                    <div className="max-w-2xl w-full bg-white rounded-3xl shadow-2xl overflow-hidden border border-slate-100">
                        {/* Header */}
                        <div className="bg-indigo-600 p-6 text-white text-center relative">
                            <h1 className="text-2xl font-bold flex items-center justify-center gap-2">
                                <Icons.Award /> 태니지먼트 강점 약식 진단
                            </h1>
                            <p className="text-indigo-100 text-sm mt-1 opacity-90">나를 가장 잘 설명하는 단어를 하나만 선택하세요.</p>
                            {!isFinished && (
                                <div className="absolute bottom-0 left-0 w-full h-1.5 bg-indigo-900/30 text-center text-white">
                                    <div className="h-full bg-emerald-400 transition-all duration-500 ease-out" style={{ width: `${progress}%` }}></div>
                                </div>
                            )}
                        </div>

                        {/* Content Area */}
                        <div className="p-8 md:p-12">
                            {!isFinished ? (
                                <div className="space-y-10">
                                    <div className="flex justify-between items-end border-b border-slate-100 pb-4">
                                        <div>
                                            <span className="text-indigo-600 font-black text-4xl">{currentStep + 1}</span>
                                            <span className="text-slate-300 font-bold text-xl ml-1">/ {questionRows.length}</span>
                                        </div>
                                        <div className="text-right">
                                            <span className="block text-[10px] text-slate-400 uppercase tracking-widest font-black">PROGRESS</span>
                                            <span className="text-indigo-600 font-mono font-bold text-lg">{Math.round(progress)}%</span>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                                        {questionRows[currentStep].words.map((item, idx) => (
                                            <button
                                                key={idx}
                                                onClick={() => handleSelect(item.type)}
                                                className="group relative flex flex-col items-center justify-center h-32 bg-white border-2 border-slate-100 hover:border-indigo-500 hover:bg-indigo-50 rounded-2xl transition-all duration-300 active:scale-95 shadow-sm hover:shadow-md px-2"
                                            >
                                                <span className="text-base md:text-lg font-bold text-slate-700 group-hover:text-indigo-700 transition-colors leading-tight text-center">
                                                    {item.word}
                                                </span>
                                                <span className="absolute top-2 right-3 text-[9px] font-mono text-slate-200 group-hover:text-indigo-200">
                                                    {item.type}
                                                </span>
                                            </button>
                                        ))}
                                    </div>

                                    <div className="flex justify-start">
                                        <button onClick={() => setCurrentStep(Math.max(0, currentStep - 1))} disabled={currentStep === 0} className="flex items-center gap-2 text-slate-400 hover:text-indigo-600 disabled:opacity-0 transition-all font-bold text-sm">
                                            <Icons.ChevronLeft /> 이전 단계로
                                        </button>
                                    </div>
                                </div>
                            ) : (
                                <div className="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-1000">
                                    <div className="text-center space-y-2">
                                        <div className="inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-bold mb-2 tracking-widest uppercase tracking-[0.2em]">Result Profile</div>
                                        <h2 className="text-3xl font-black text-slate-800 tracking-tight">강점 프로필 결과</h2>
                                        <p className="text-slate-500 text-sm">8가지 역량 분포 결과입니다</p>
                                    </div>

                                    {/* Radar Chart Display (결과 면적 시각적 2배 확대 적용) */}
                                    <div className="flex justify-center p-4 bg-slate-50 rounded-[3rem] border border-slate-100 shadow-inner overflow-hidden">
                                        <div className="w-full flex justify-center py-4">
                                            <svg 
                                                width="580" 
                                                height="580" 
                                                viewBox={`0 0 ${chartSize} ${chartSize}`} 
                                                className="drop-shadow-2xl overflow-visible flex-shrink-0"
                                                style={{ maxWidth: '100%', height: 'auto' }}
                                            >
                                                {/* Guidelines */}
                                                {[1, 2, 3, 4, 5, 6].map((tick) => (
                                                    <polygon
                                                        key={tick}
                                                        points={roles.map((_, i) => {
                                                            const angle = getAngle(i);
                                                            const r = (tick / visualMaxScore) * radius;
                                                            return `${center + r * Math.cos(angle)},${center + r * Math.sin(angle)}`;
                                                        }).join(' ')}
                                                        fill="none"
                                                        stroke="#CBD5E1"
                                                        strokeWidth="1.5"
                                                        strokeDasharray="6 3"
                                                    />
                                                ))}
                                                
                                                {/* Axis lines */}
                                                {roles.map((_, i) => {
                                                    const angle = getAngle(i);
                                                    return (
                                                        <line
                                                            key={i}
                                                            x1={center} y1={center}
                                                            x2={center + radius * Math.cos(angle)}
                                                            y2={center + radius * Math.sin(angle)}
                                                            stroke="#E2E8F0"
                                                            strokeWidth="2"
                                                        />
                                                    );
                                                })}

                                                {/* Result Area Shape (보라색 결과 면적) */}
                                                <polygon
                                                    points={getRadarPoints()}
                                                    fill="rgba(79, 70, 229, 0.45)"
                                                    stroke="#4F46E5"
                                                    strokeWidth="7"
                                                    strokeLinejoin="round"
                                                    className="radar-transition"
                                                />

                                                {/* Labels and point indicators */}
                                                {roles.map((role, i) => {
                                                    const angle = getAngle(i);
                                                    const score = scores[role.id] || 0;
                                                    const labelDist = radius + 60;
                                                    const x = center + labelDist * Math.cos(angle);
                                                    const y = center + labelDist * Math.sin(angle);
                                                    
                                                    const pointR = Math.min(radius, Math.max(15, (score / visualMaxScore) * radius));
                                                    
                                                    return (
                                                        <g key={role.id}>
                                                            <circle
                                                                cx={center + pointR * Math.cos(angle)}
                                                                cy={center + pointR * Math.sin(angle)}
                                                                r="6"
                                                                fill="#4F46E5"
                                                            />
                                                            <text
                                                                x={x}
                                                                y={y - 5}
                                                                textAnchor="middle"
                                                                dominantBaseline="middle"
                                                                className="text-[17px] font-black"
                                                                fill={role.color}
                                                            >
                                                                {role.name}
                                                            </text>
                                                            <text
                                                                x={x}
                                                                y={y + 18}
                                                                textAnchor="middle"
                                                                dominantBaseline="middle"
                                                                className="text-[14px] font-mono font-bold"
                                                                fill="#94A3B8"
                                                            >
                                                                {score}점
                                                            </text>
                                                        </g>
                                                    );
                                                })}
                                            </svg>
                                        </div>
                                    </div>

                                    {/* Summary Score Cards */}
                                    <div className="grid grid-cols-2 gap-4 mt-8">
                                        {roles.map(role => (
                                            <div key={role.id} className="flex items-center justify-between p-5 bg-white rounded-2xl border border-slate-100 shadow-sm transition-all hover:shadow-md hover:border-indigo-200">
                                                <div className="flex items-center gap-3">
                                                    <div className="w-4 h-4 rounded-full shadow-inner" style={{ backgroundColor: role.color }}></div>
                                                    <span className="font-bold text-slate-700 text-sm">{role.name}</span>
                                                </div>
                                                <span className="text-2xl font-black text-indigo-600">{scores[role.id]}</span>
                                            </div>
                                        ))}
                                    </div>

                                    <button onClick={resetTest} className="w-full flex items-center justify-center gap-2 bg-slate-900 hover:bg-black text-white py-6 rounded-[1.5rem] font-black transition-all shadow-xl active:scale-95 mt-6 text-lg">
                                        <Icons.RefreshCw /> 테스트 다시하기
                                    </button>
                                </div>
                            )}
                        </div>

                        {/* Footer */}
                        <div className="bg-slate-50 p-6 border-t border-slate-100 text-center">
                            <div className="flex flex-col items-center justify-center gap-1 text-[11px] text-slate-400">
                                <div className="flex items-center gap-2">
                                    <Icons.BookOpen />
                                    <span>출처: 도서 <strong>&lt;강점 발견&gt;</strong></span>
                                </div>
                                <span className="font-medium">Made by Healer coach</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
